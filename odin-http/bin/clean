#!/usr/bin/env bash
# odin-http/bin/clean
set -euo pipefail
source "$(dirname "$0")/_lib.sh"

ROOT="$(endpoint_root)"
cd "$ROOT"

info "Cleaning build artifacts in: $ROOT"

rm -f ./server ./server.exe ./http_server ./howdy-odin-http
rm -rf ./*.dSYM

rm -rf ./build ./dist ./out ./tmp
rm -rf ./.cache ./.odin-cache ./.odin_cache

# Delete common compilation/link artifacts in the endpoint root only
find . -maxdepth 1 -type f \( \
  -name "*.o" -o -name "*.obj" -o -name "*.a" -o -name "*.so" -o -name "*.dylib" -o -name "*.dll" \
\) -print -delete 2>/dev/null || true

info "Done."
