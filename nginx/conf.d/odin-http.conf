# nginx/conf.d/odin-http.conf

# Redirect /odin-http -> /odin-http/ (canonical trailing slash)
location = /odin-http {
  return 301 /odin-http/;
}

# Proxy everything under /odin-http/ to the Odin server.
# NOTE: the trailing slash on proxy_pass is IMPORTANT â€” it strips the /odin-http/ prefix
# so the Odin app can route on "/" (root).
location ^~ /odin-http/ {
  proxy_http_version 1.1;

  proxy_set_header Host              $host;
  proxy_set_header X-Real-IP         $remote_addr;
  proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Proto $scheme;

  proxy_pass http://odin-http:6969/;
}
